<!DOCTYPE html>
<html lang="es">
<head>
  <title>Demo de Spring MVC : Index</title>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
  <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
</head>
<body>
  <p>Ver todas las sucursales <a href="/sucursales">Aquí</a></p>

  <h2>Ver una sucursal por ID</h2>
  <input type="number" id="sucursalId" placeholder="Introduce el ID de la sucursal">
  <button id="verSucursalBtn">Ver Sucursal</button>

  <h1>Añadir Sucursal</h1>

  <form id="formNuevaSucursal">
    <label for="nombre">Nombre de la Sucursal:</label>
    <input type="text" id="nombre" name="nombre" required placeholder="Nombre de la sucursal" /><br><br>

    <label for="director">Director:</label>
    <input type="text" id="director" name="director" required placeholder="Nombre del director" /><br><br>

    <label for="direccion">Dirección:</label>
    <input type="text" id="direccion" name="direccion" required placeholder="Dirección de la sucursal" /><br><br>

    <button type="button" id="agregarSucursalBtn">Añadir Sucursal</button>
  </form>

  <h1>Modificar Sucursal</h1>


  <form id="formModificarSucursal">
    <label for="idSucursal">ID de la Sucursal:</label>
    <input type="number" id="idSucursal" name="idSucursal" required placeholder="ID de la sucursal a modificar" /><br><br>

    <label for="nombreSucursal">Nuevo Nombre de la Sucursal:</label>
    <input type="text" id="nombreSucursal" name="nombreSucursal" required placeholder="Nuevo nombre de la sucursal" /><br><br>

    <label for="directorSucursal">Nuevo Director:</label>
    <input type="text" id="directorSucursal" name="directorSucursal" required placeholder="Nuevo director" /><br><br>

    <label for="direccionSucursal">Nueva Dirección:</label>
    <input type="text" id="direccionSucursal" name="direccionSucursal" required placeholder="Nueva dirección de la sucursal" /><br><br>

    <button type="button" id="modificarSucursalBtn">Modificar Sucursal</button>
  </form>

  <h2>Borrar una Sucursal</h2>
  <form id="formBorrarSucursal">
    <label for="idBorrar">ID de la Sucursal a Borrar:</label>
    <input type="number" id="idBorrar" placeholder="ID de la sucursal a borrar" required /><br><br>

    <button type="button" id="borrarSucursalBtn">Borrar Sucursal</button>
  </form>

      <script>


        $(document).ready(function() {
       // Cuando el botón sea clickeado
       $('#verSucursalBtn').click(function() {
         // Obtener el valor del input
         var sucursalId = $('#sucursalId').val();

         // Validar si se ingresó un ID
         if (sucursalId) {
           // Redirigir a la URL con el ID introducido
           window.location.href = 'http://localhost:8080/sucursales/' + sucursalId;
         } else {
           alert('Por favor ingresa un ID válido.');
         }
       });
     });

       $(document).ready(function() {

       $('#agregarSucursalBtn').click(function() {

         var nombre = $('#nombre').val();
         var director = $('#director').val();
         var direccion = $('#direccion').val();


         var nuevaSucursal = {
           nombre: nombre,
           director: director,
           direccion: direccion
         };


         $.ajax({
           url: 'http://localhost:8080/sucursales',
           type: 'POST',
           contentType: 'application/json',
           data: JSON.stringify(nuevaSucursal),
           success: function(response) {

             alert('Sucursal añadida exitosamente');

             $('#nombre').val('');
             $('#director').val('');
             $('#direccion').val('');
           },
           error: function(error) {

             console.log('Error al añadir la sucursal', error);
             alert('Hubo un error al añadir la sucursal. Intenta nuevamente.');
           }
         });
       });
     });

     $(document).ready(function() {

       $('#modificarSucursalBtn').click(function() {

         var idSucursal = $('#idSucursal').val();
         var nombre = $('#nombreSucursal').val();
         var director = $('#directorSucursal').val();
         var direccion = $('#direccionSucursal').val();


         if (idSucursal && nombreSucursal && directorSucursal && direccionSucursal) {

           var sucursalModificada = {
             nombre: nombre,
             director: director,
             direccion: direccion
           };


           $.ajax({
             url: 'http://localhost:8080/sucursales/' + idSucursal,
             type: 'PUT',
             contentType: 'application/json',
             data: JSON.stringify(sucursalModificada),
             success: function(response) {

               alert('Sucursal modificada exitosamente');

               $('#idSucursal').val('');
               $('#nombreSucursal').val('');
               $('#directorSucursal').val('');
               $('#direccionSucursal').val('');
             },
             error: function(error) {

               console.log('Error al modificar la sucursal', error);
               alert('Hubo un error al modificar la sucursal. Intenta nuevamente.');
             }
           });
         } else {
           alert('Por favor completa todos los campos.');
         }
       });
     });

        $(document).ready(function() {

      $('#borrarSucursalBtn').click(function() {
        var idBorrar = $('#idBorrar').val();

        if (idBorrar) {

          $.ajax({
            url: 'http://localhost:8080/sucursales/' + idBorrar,
            type: 'DELETE',
            success: function(response) {
              alert(response);
              $('#idBorrar').val('');
            },
            error: function(error) {
              console.log('Error al borrar la sucursal', error);
              alert('Hubo un error al borrar la sucursal');
            }
          });
        } else {
          alert('Por favor ingresa el ID de la sucursal a borrar');
        }
      });
    });

  </script>



</body>


</html>
